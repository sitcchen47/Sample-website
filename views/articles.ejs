<%- include('header', {user: user}) %>
    <div class="container">
        <div class="main">
            <% for(let i = 0; i < articles.length; i++) { %>
                <div class="article">
                    <p> <a href="/articles/id/<%= articles[i]._id %>"><%= articles[i].title %></a> <br>
                        <span class="author"><%= articles[i].author %></span> | <span>发布于</span> <span class="time"><%= Messages[i]%></span>
                        <!-- <a href="#"><%= articles[i].liked %></a> -->
                        <hr>
                    </p>
                </div>
            <% } %>
            <div class="divForm">
            
            <button class="articlePostTrigger">发表文章</button>
            <form action="/articles/post" method="POST" class="hidden">
                <label for="title">文章标题
                    <input type="text" name="title" id="a-title">
                </label>
                <label for="body">内容
                    <textarea name="body" id="a-body" cols="30" rows="10"></textarea>
                </label>
                <label for="confirmPic">验证码
                    <img src="/random-confirm-pic" alt="验证码图片">
                    <input type="text" name="confirmPic" id="a-confirmPic">
                </label>
                <button type="submit">发表</button>
                <button type="reset">重置</button>
            </form>
            </div>
        </div>
        <div class="right"></div>
    </div>
    <script>
        const buttondom = document.querySelector('button.articlePostTrigger');
        buttondom.addEventListener('click', function(event) {
            let formdom = event.target.nextElementSibling;
            formdom.classList.toggle('hidden');
        });
    </script>
    <%- include('errorHandler', {error: error})%>
<body>   
<%- include('footer') %>